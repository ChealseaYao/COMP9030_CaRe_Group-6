<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Record Patients Notes</title>
    <link rel="stylesheet" href="/style/style.css">   
</head>
<body>
    <div class="note-container">
        <a href="#" class="back-button">&lt; Patient Detail</a>
        <div class="note-title">
            <h2 id="note-notes">Notes</h2>
        </div>
        <div class="note-patient-name">
            <label for="patient-name">Patient Name</label>
            <input type="text" id="patient-name" value="John Smith" disabled>
        </div>
        <div class="date-picker-container">
            <label for="date-range-input" id="history-note">History Notes</label>
            <!-- <input type="text" id="date-range-input" placeholder="Select date range" readonly> -->
            <span id="date-icon">
                <img src="/image/calendar.png" alt="Calendar Icon">
            </span>
            <div id="date-picker" class="date-picker"></div>
        </div>
        <table class="note-history-note">
            <thead>
                <tr>
                    <th class="date-column">Date</th> <!-- 应用小宽度的类 -->
                    <th>Notes</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>07/Aug</td>
                    <td>Patient reported feeling anxious in social settings. Suggested practicing deep breathing exercises.</td>
                    <td><button class="delete-button">Delete</button></td>
                </tr>
                <tr>
                    <td>06/Aug</td>
                    <td>Discussed progress with cognitive behavioral therapy. Patient is noticing gradual improvement in mood.</td>
                    <td><button class="delete-button">Delete</button></td>
                </tr>
                <tr>
                    <td>03/Aug</td>
                    <td>Initial session: Established treatment goals. Patient expressed concerns about managing work-related stress.</td>
                    <td><button class="delete-button">Delete</button></td>
                </tr>
            </tbody>
        </table>
        <div>
            <p id="note-add-new">Add a New Note</p>
            <textarea name="new-note" id="new-note"></textarea>
        </div>
        <div class="note-button">
            <button type="submit" id="note-save">Save</button>
        </div>
    </div>

    <!-- 日期选择器逻辑的引入 -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const dateRangeInput = document.getElementById('date-range-input');
            const dateIcon = document.getElementById('date-icon');
            const datePickerContainer = document.getElementById('date-picker');

            let selectedDate = null;

            function toggleDatePicker() {
                datePickerContainer.style.display = datePickerContainer.style.display === 'block' ? 'none' : 'block';
                renderDatePicker();
            }

            dateRangeInput.addEventListener('click', toggleDatePicker);
            dateIcon.addEventListener('click', toggleDatePicker);

            function renderDatePicker() {
                datePickerContainer.innerHTML = ''; // 清空之前的内容

                const date = new Date();
                const daysInMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();

                for (let i = 1; i <= daysInMonth; i++) {
                    const day = document.createElement('div');
                    day.textContent = i;
                    day.addEventListener('click', () => {
                        selectedDate = i + '/' + (date.getMonth() + 1) + '/' + date.getFullYear();
                        dateRangeInput.value = selectedDate;
                        datePickerContainer.style.display = 'none';
                    });

                    datePickerContainer.appendChild(day);
                }
            }

            document.addEventListener('click', (event) => {
                if (!datePickerContainer.contains(event.target) && !dateRangeInput.contains(event.target) && !dateIcon.contains(event.target)) {
                    datePickerContainer.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>
